# ğŸ¯ å¾®å‰ç«¯å­ç³»ç»Ÿæ ‡å‡†æ¨¡æ¿ (mf-template)

è¿™æ˜¯ä¸€ä¸ªç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¾®å‰ç«¯å­ç³»ç»Ÿæ ‡å‡†æ¨¡æ¿ï¼ŒåŸºäº mf-marketing å’Œ mf-finance çš„æœ€ä½³å®è·µï¼Œæä¾›äº†å®Œæ•´çš„é…ç½®å’ŒåŸºç¡€åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»ºæ–°çš„å¾®å‰ç«¯å­ç³»ç»Ÿã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ—ï¸ **å®Œæ•´çš„å¾®å‰ç«¯æ¶æ„** - Module Federation + Rsbuild æ„å»º
- ğŸ” **ç»Ÿä¸€è®¤è¯ç³»ç»Ÿ** - ä¸ä¸»åº”ç”¨ mf-shell æ— ç¼é›†æˆ
- ğŸš€ **è‡ªåŠ¨åŒ–éƒ¨ç½²** - GitHub Pages + GitHub Actions CI/CD
- ğŸ¨ **ç°ä»£åŒ– UI** - Ant Design 5.x å“åº”å¼å¸ƒå±€
- ğŸ“ **TypeScript æ”¯æŒ** - å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ£€æŸ¥
- ğŸ”§ **æ ‡å‡†åŒ–é…ç½®** - ä¸ç°æœ‰å­ç³»ç»Ÿå®Œå…¨ä¸€è‡´çš„é…ç½®æ¨¡å¼
- ğŸ“± **SPA è·¯ç”±æ”¯æŒ** - GitHub Pages å•é¡µåº”ç”¨è·¯ç”±é‡å®šå‘
- ğŸ› ï¸ **å¼€å‘å·¥å…·** - è‡ªåŠ¨åŒ–åˆ›å»ºè„šæœ¬å’Œè¯¦ç»†æ–‡æ¡£

## ğŸ¨ æ¨¡æ¿ç‰¹è‰²

### ğŸ“‹ åŸºäºæœ€ä½³å®è·µ
æœ¬æ¨¡æ¿åŸºäº **mf-marketing** å’Œ **mf-finance** ä¸¤ä¸ªæˆç†Ÿå­ç³»ç»Ÿçš„é…ç½®ç»éªŒï¼Œç¡®ä¿ï¼š
- ğŸ”§ é…ç½®æ¶æ„å®Œå…¨ç»Ÿä¸€
- ğŸš€ éƒ¨ç½²æµç¨‹æ ‡å‡†åŒ–
- ğŸ” è®¤è¯é›†æˆæ— ç¼å¯¹æ¥
- ğŸ“± è·¯ç”±å¤„ç†ä¸€è‡´æ€§

### ğŸ¯ å¼€ç®±å³ç”¨çš„åŠŸèƒ½
- **å®Œæ•´çš„é¡µé¢ç¤ºä¾‹** - Dashboardã€åŠŸèƒ½æ¨¡å—ã€è®¾ç½®é¡µé¢
- **å“åº”å¼å¸ƒå±€** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯
- **ä¸»é¢˜å®šåˆ¶** - åŸºäº Ant Design çš„ç°ä»£åŒ–è®¾è®¡
- **é”™è¯¯å¤„ç†** - 404 é¡µé¢å’Œé”™è¯¯è¾¹ç•Œ
- **åŠ è½½çŠ¶æ€** - éª¨æ¶å±å’ŒåŠ è½½åŠ¨ç”»

### ğŸ”„ æ™ºèƒ½è·¯ç”±å¤„ç†
- **å¼€å‘ç¯å¢ƒ** - ç›´æ¥è·¯ç”±ï¼Œæ—  basename
- **ç”Ÿäº§ç¯å¢ƒ** - è‡ªåŠ¨æ£€æµ‹ç‹¬ç«‹éƒ¨ç½² vs ä¸»åº”ç”¨é›†æˆ
- **SPA æ”¯æŒ** - GitHub Pages å•é¡µåº”ç”¨è·¯ç”±é‡å®šå‘
- **å¾®å‰ç«¯é€šä¿¡** - ä¸ä¸»åº”ç”¨çš„æ¶ˆæ¯ä¼ é€’

## ğŸ“ é¡¹ç›®ç»“æ„

```
mf-template/
â”œâ”€â”€ .github/workflows/     # GitHub Actions é…ç½®
â”‚   â””â”€â”€ deploy.yml        # è‡ªåŠ¨éƒ¨ç½²é…ç½®
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html       # ä¸»é¡µé¢æ¨¡æ¿
â”‚   â””â”€â”€ 404.html         # SPA è·¯ç”±é‡å®šå‘
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/       # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout.tsx   # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AuthGuard.tsx # è®¤è¯å®ˆå«
â”‚   â”‚   â””â”€â”€ AppSkeleton.tsx # åŠ è½½éª¨æ¶å±
â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ deployment.ts # éƒ¨ç½²ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ Feature1.tsx # åŠŸèƒ½é¡µé¢1
â”‚   â”‚   â”œâ”€â”€ Feature2.tsx # åŠŸèƒ½é¡µé¢2
â”‚   â”‚   â”œâ”€â”€ Settings.tsx # è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ NotFound.tsx # 404é¡µé¢
â”‚   â”œâ”€â”€ routes/          # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts     # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ authUtils.ts # è®¤è¯å·¥å…·
â”‚   â”œâ”€â”€ App.tsx          # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ App.css          # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ main.tsx         # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ bootstrap.tsx    # å¾®å‰ç«¯å¯åŠ¨æ–‡ä»¶
â”‚   â””â”€â”€ index.ts         # å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json         # é¡¹ç›®é…ç½®
â”œâ”€â”€ rsbuild.config.ts    # æ„å»ºé…ç½®
â”œâ”€â”€ module-federation.config.ts # å¾®å‰ç«¯é…ç½®
â”œâ”€â”€ tsconfig.json        # TypeScript é…ç½®
â”œâ”€â”€ scripts/            # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ create-new-module.sh # è‡ªåŠ¨åŒ–åˆ›å»ºè„šæœ¬
â”œâ”€â”€ TEMPLATE_USAGE.md   # è¯¦ç»†ä½¿ç”¨æŒ‡å—
â””â”€â”€ README.md           # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# åœ¨ mf-template ç›®å½•ä¸‹æ‰§è¡Œ
./scripts/create-new-module.sh <æ¨¡å—å> <ç«¯å£å·> "<ç³»ç»Ÿæ ‡é¢˜>"

# ç¤ºä¾‹ï¼šåˆ›å»ºåº“å­˜ç®¡ç†ç³»ç»Ÿ
./scripts/create-new-module.sh inventory 3004 "åº“å­˜ç®¡ç†ç³»ç»Ÿ"

# ç¤ºä¾‹ï¼šåˆ›å»ºè®¢å•ç®¡ç†ç³»ç»Ÿ
./scripts/create-new-module.sh order 3005 "è®¢å•ç®¡ç†ç³»ç»Ÿ"

# ç¤ºä¾‹ï¼šåˆ›å»ºç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
./scripts/create-new-module.sh user 3006 "ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ"
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- ğŸ“ å¤åˆ¶æ¨¡æ¿æ–‡ä»¶åˆ°æ–°ç›®å½•
- ğŸ”„ æ›¿æ¢æ‰€æœ‰é…ç½®ä¸­çš„é¡¹ç›®åç§°ã€ç«¯å£ã€æ ‡é¢˜
- ğŸ“ ç”Ÿæˆå¯¹åº”çš„ README.md
- âœ… ç¡®ä¿é…ç½®çš„ä¸€è‡´æ€§

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¤åˆ¶å’Œé…ç½®

```bash
# 1. å¤åˆ¶æ¨¡æ¿åˆ°æ–°é¡¹ç›®ç›®å½•
cp -r mf-template mf-your-new-module
cd mf-your-new-module

# 2. åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶
rm -rf .git node_modules dist scripts/create-new-module.sh TEMPLATE_USAGE.md

# 3. æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆå‚è€ƒ TEMPLATE_USAGE.mdï¼‰
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **React** | 18.3.1 | å‰ç«¯æ¡†æ¶ |
| **TypeScript** | 5.6.3 | ç±»å‹ç³»ç»Ÿ |
| **Ant Design** | 5.26.7 | UI ç»„ä»¶åº“ |
| **Rsbuild** | 1.1.8 | æ„å»ºå·¥å…· |
| **Module Federation** | 0.17.1 | å¾®å‰ç«¯æ¶æ„ |
| **React Router** | 7.7.1 | è·¯ç”±ç®¡ç† |
| **GitHub Pages** | - | éƒ¨ç½²å¹³å° |
| **GitHub Actions** | - | CI/CD æµæ°´çº¿ |

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. å¤åˆ¶æ¨¡æ¿

```bash
# å¤åˆ¶æ¨¡æ¿é¡¹ç›®åˆ°æ–°ç›®å½•
cp -r mf-template mf-your-module
cd mf-your-module
```

### 2. ä¿®æ”¹é…ç½®

éœ€è¦ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ä¸­çš„é…ç½®ï¼š

#### package.json
```json
{
  "name": "mf-your-module",  // ä¿®æ”¹é¡¹ç›®åç§°
  // ...
}
```

#### rsbuild.config.ts
```typescript
export default defineConfig({
  server: {
    port: 3004,  // ä¿®æ”¹ç«¯å£å·
  },
  html: {
    title: 'æ‚¨çš„æ¨¡å—åç§°',  // ä¿®æ”¹æ ‡é¢˜
  },
  output: {
    assetPrefix: process.env.NODE_ENV === 'production'
      ? '/mf-your-module/'  // ä¿®æ”¹é¡¹ç›®åç§°
      : '/',
  },
  source: {
    define: {
      'process.env.PUBLIC_URL': JSON.stringify(
        process.env.NODE_ENV === 'production' ? '/mf-your-module' : ''  // ä¿®æ”¹é¡¹ç›®åç§°
      ),
    },
  },
});
```

#### module-federation.config.ts
```typescript
export default createModuleFederationConfig({
  name: 'yourModule',  // ä¿®æ”¹æ¨¡å—åç§°
  // ...
});
```

#### src/config/deployment.ts
```typescript
export const deploymentConfig = {
  // å½“å‰æ¨¡å— URL
  yourModuleApp: {  // ä¿®æ”¹æ¨¡å—åç§°
    development: 'http://localhost:3004',  // ä¿®æ”¹ç«¯å£
    production: 'https://luozyiii.github.io/mf-your-module'  // ä¿®æ”¹é¡¹ç›®åç§°
  },
  basename: {
    development: '',
    production: '/mf-your-module'  // ä¿®æ”¹é¡¹ç›®åç§°
  },
  getCurrentConfig() {
    const env = process.env.NODE_ENV || 'development';
    return {
      shellUrl: this.shellApp[env as keyof typeof this.shellApp],
      yourModuleUrl: this.yourModuleApp[env as keyof typeof this.yourModuleApp],  // ä¿®æ”¹å±æ€§å
      basename: this.basename[env as keyof typeof this.basename],
      isProduction: env === 'production'
    };
  }
};
```

#### .github/workflows/deploy.yml
```yaml
- name: Build with Rsbuild
  run: npm run build
  env:
    NODE_ENV: production
    PUBLIC_URL: https://luozyiii.github.io/mf-your-module/  # ä¿®æ”¹é¡¹ç›®åç§°
```

#### public/404.html
```javascript
// ä¿®æ”¹æ‰€æœ‰ '/mf-template' ä¸º '/mf-your-module'
```

### 3. å®‰è£…ä¾èµ–

```bash
npm install
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

### 5. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

## ğŸš€ éƒ¨ç½²

### GitHub Pages è‡ªåŠ¨éƒ¨ç½²

1. å°†ä»£ç æ¨é€åˆ° GitHub ä»“åº“
2. åœ¨ä»“åº“è®¾ç½®ä¸­å¯ç”¨ GitHub Pages
3. é€‰æ‹© "GitHub Actions" ä½œä¸ºéƒ¨ç½²æº
4. æ¨é€ä»£ç åˆ° main åˆ†æ”¯å³å¯è‡ªåŠ¨éƒ¨ç½²

### æ‰‹åŠ¨éƒ¨ç½²

```bash
npm run deploy
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/pages/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„é¡µé¢ç»„ä»¶
2. åœ¨ `src/routes/index.ts` ä¸­æ·»åŠ è·¯ç”±é…ç½®
3. åœ¨ `src/App.tsx` ä¸­æ·»åŠ è·¯ç”±æ˜ å°„
4. åœ¨ `src/components/Layout.tsx` ä¸­æ·»åŠ èœå•é¡¹

### ä¿®æ”¹æ ·å¼

- å…¨å±€æ ·å¼ï¼šä¿®æ”¹ `src/App.css`
- ç»„ä»¶æ ·å¼ï¼šä½¿ç”¨ Ant Design çš„ä¸»é¢˜å®šåˆ¶æˆ– CSS-in-JS

### é›†æˆåˆ°ä¸»åº”ç”¨

æ¨¡æ¿å·²ç»é…ç½®å¥½äº†ä¸ä¸»åº”ç”¨çš„é›†æˆï¼ŒåŒ…æ‹¬ï¼š
- è®¤è¯çŠ¶æ€åŒæ­¥
- è·¯ç”±æ¶ˆæ¯é€šä¿¡
- ç¯å¢ƒæ£€æµ‹ï¼ˆç‹¬ç«‹è¿è¡Œ vs å¾®å‰ç«¯ç¯å¢ƒï¼‰

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç«¯å£å†²çª**: ç¡®ä¿æ¯ä¸ªå­ç³»ç»Ÿä½¿ç”¨ä¸åŒçš„ç«¯å£å·
2. **æ¨¡å—åç§°**: Module Federation çš„æ¨¡å—åç§°å¿…é¡»å”¯ä¸€
3. **è·¯ç”±é…ç½®**: basename é…ç½®è¦ä¸éƒ¨ç½²è·¯å¾„ä¸€è‡´
4. **è®¤è¯é›†æˆ**: ç¡®ä¿ä¸ä¸»åº”ç”¨çš„è®¤è¯ç³»ç»Ÿæ­£ç¡®é›†æˆ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªæ¨¡æ¿ï¼

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºåº“å­˜ç®¡ç†ç³»ç»Ÿ

```bash
# 1. ä½¿ç”¨è„šæœ¬åˆ›å»º
./scripts/create-new-module.sh inventory 3004 "åº“å­˜ç®¡ç†ç³»ç»Ÿ"

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd mf-inventory

# 3. å®‰è£…ä¾èµ–
npm install

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 5. è®¿é—®åº”ç”¨
open http://localhost:3004
```

### éƒ¨ç½²åˆ° GitHub Pages

```bash
# 1. åˆ›å»º GitHub ä»“åº“ mf-inventory
# 2. æ¨é€ä»£ç 
git remote add origin https://github.com/your-username/mf-inventory.git
git push -u origin main

# 3. åœ¨ä»“åº“è®¾ç½®ä¸­å¯ç”¨ GitHub Pages
# 4. é€‰æ‹© "GitHub Actions" ä½œä¸ºéƒ¨ç½²æº
# 5. è®¿é—® https://your-username.github.io/mf-inventory
```

## ğŸŒŸ é¡¹ç›®ä¼˜åŠ¿

### ğŸš€ å¿«é€Ÿå¼€å‘
- **5åˆ†é’Ÿåˆ›å»º** - ä»æ¨¡æ¿åˆ°è¿è¡Œçš„å®Œæ•´é¡¹ç›®
- **é›¶é…ç½®** - æ‰€æœ‰é…ç½®éƒ½å·²ä¼˜åŒ–å®Œæˆ
- **å³æ—¶é¢„è§ˆ** - çƒ­é‡è½½å¼€å‘ä½“éªŒ

### ğŸ”§ é«˜åº¦ä¸€è‡´
- **ç»Ÿä¸€æ¶æ„** - ä¸ç°æœ‰å­ç³»ç»Ÿå®Œå…¨ä¸€è‡´
- **æ ‡å‡†é…ç½®** - é¿å…é…ç½®å·®å¼‚å¯¼è‡´çš„é—®é¢˜
- **æœ€ä½³å®è·µ** - åŸºäºç”Ÿäº§ç¯å¢ƒéªŒè¯çš„é…ç½®

### ğŸ“ˆ æ˜“äºç»´æŠ¤
- **æ–‡æ¡£å®Œå–„** - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œæ³¨é‡Š
- **è‡ªåŠ¨åŒ–å·¥å…·** - å‡å°‘æ‰‹åŠ¨é…ç½®é”™è¯¯
- **ç‰ˆæœ¬åŒæ­¥** - ä¾èµ–ç‰ˆæœ¬ä¸å…¶ä»–å­ç³»ç»Ÿä¿æŒä¸€è‡´

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªæ¨¡æ¿ï¼

### æ”¹è¿›å»ºè®®
- ğŸ› å‘ç° Bug è¯·æäº¤ Issue
- ğŸ’¡ åŠŸèƒ½å»ºè®®è¯·è¯¦ç»†æè¿°ä½¿ç”¨åœºæ™¯
- ğŸ“ æ–‡æ¡£æ”¹è¿›æ°¸è¿œæ¬¢è¿
- ğŸ”§ é…ç½®ä¼˜åŒ–è¯·è¯´æ˜ç†ç”±

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. ğŸ“– æŸ¥çœ‹ `TEMPLATE_USAGE.md` è¯¦ç»†æŒ‡å—
2. ğŸ” æ£€æŸ¥ GitHub Issues ä¸­çš„å¸¸è§é—®é¢˜
3. ğŸ’¬ æäº¤æ–°çš„ Issue æè¿°é—®é¢˜
4. ğŸ“§ è”ç³»å¼€å‘å›¢é˜Ÿè·å–æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

MIT License

---

**ğŸ‰ å¼€å§‹æ‚¨çš„å¾®å‰ç«¯å¼€å‘ä¹‹æ—…å§ï¼**

è¿™ä¸ªæ¨¡æ¿å°†å¸®åŠ©æ‚¨å¿«é€Ÿåˆ›å»ºé«˜è´¨é‡ã€æ ‡å‡†åŒ–çš„å¾®å‰ç«¯å­ç³»ç»Ÿï¼Œè®©æ‚¨ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œè€Œä¸æ˜¯åŸºç¡€é…ç½®çš„æ­å»ºã€‚
